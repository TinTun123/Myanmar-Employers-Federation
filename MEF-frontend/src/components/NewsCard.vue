<template>
  <div
    class="bg-white border border-black/30 transition hover:shadow-none cursor-pointer shadow-lg rounded-xl flex flex-col gap-4 pb-4">
    <div class="h-32 rounded-t-xl overflow-hidden">
      <img :src="post.image" class="w-full h-full" alt="" />
      {{ index }}
    </div>
    <!-- Body text -->
    <div class="px-2">
      <p class="line-clamp-2 text-sm text-black/70">
        {{ post.title }}
      </p>
    </div>

    <!-- Action buttons -->
    <div class="flex items-center justify-between px-2">
      <!-- Msg / Likes / date -->
      <div class="flex justify-betweem items-center gap-4">
        <!-- Date icon -->

        <div class="flex gap-1 items-center">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <mask id="path-1-inside-1_17_325" fill="white">
              <path
                d="M5.00004 4.00008V0.666748V4.00008ZM11.6667 4.00008V0.666748V4.00008ZM14.3334 11.3334V14.3334H2.33337V12.3334M14.242 5.66675H2.23471H14.242ZM0.333374 12.1667V12.3334H12.2667L12.3667 12.1667L12.5227 11.8394C13.7148 9.33388 14.3334 6.5941 14.3334 3.81941V2.33341H2.33337V3.75208C2.3334 6.5482 1.70527 9.30861 0.495374 11.8294L0.333374 12.1667Z" />
            </mask>
            <path
              d="M14.3334 14.3334V15.3334H15.3334V14.3334H14.3334ZM2.33337 14.3334H1.33337V15.3334H2.33337V14.3334ZM0.333374 12.1667L-0.568066 11.7338L-0.666626 11.9391V12.1667H0.333374ZM0.333374 12.3334H-0.666626V13.3334H0.333374V12.3334ZM12.2667 12.3334V13.3334H12.8329L13.1242 12.8479L12.2667 12.3334ZM12.3667 12.1667L13.2242 12.6812L13.2488 12.6402L13.2694 12.597L12.3667 12.1667ZM12.5227 11.8394L13.4254 12.2696L13.4257 12.2691L12.5227 11.8394ZM14.3334 3.81941H13.3334V3.81942L14.3334 3.81941ZM14.3334 2.33341H15.3334V1.33341H14.3334V2.33341ZM2.33337 2.33341V1.33341H1.33337V2.33341H2.33337ZM2.33337 3.75208H1.33337L1.33337 3.75209L2.33337 3.75208ZM0.495374 11.8294L1.39681 12.2623L1.39691 12.2621L0.495374 11.8294ZM6.00004 4.00008V0.666748H4.00004V4.00008H6.00004ZM12.6667 4.00008V0.666748H10.6667V4.00008H12.6667ZM13.3334 11.3334V14.3334H15.3334V11.3334H13.3334ZM14.3334 13.3334H2.33337V15.3334H14.3334V13.3334ZM3.33337 14.3334V12.3334H1.33337V14.3334H3.33337ZM14.242 4.66675H2.23471V6.66675H14.242V4.66675ZM-0.666626 12.1667V12.3334H1.33337V12.1667H-0.666626ZM0.333374 13.3334H12.2667V11.3334H0.333374V13.3334ZM13.1242 12.8479L13.2242 12.6812L11.5092 11.6523L11.4092 11.8189L13.1242 12.8479ZM13.2694 12.597L13.4254 12.2696L11.62 11.4092L11.464 11.7365L13.2694 12.597ZM13.4257 12.2691C14.6817 9.62929 15.3334 6.74274 15.3334 3.81941L13.3334 3.81942C13.3334 6.44545 12.748 9.03846 11.6197 11.4098L13.4257 12.2691ZM15.3334 3.81941V2.33341H13.3334V3.81941H15.3334ZM14.3334 1.33341H2.33337V3.33341H14.3334V1.33341ZM1.33337 2.33341V3.75208H3.33337V2.33341H1.33337ZM1.33337 3.75209C1.3334 6.39842 0.738917 9.01095 -0.406162 11.3967L1.39691 12.2621C2.67162 9.60627 3.3334 6.69799 3.33337 3.75207L1.33337 3.75209ZM-0.406066 11.3965L-0.568066 11.7338L1.23481 12.5997L1.39681 12.2623L-0.406066 11.3965Z"
              fill="black" mask="url(#path-1-inside-1_17_325)" />
          </svg>
          <span class="text-xs text-black font-semibold">{{ post.publish_date }}</span>
        </div>
      </div>


      <!-- Comment icon -->
      <div class="flex items-center gap-1">
        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M8 0.000800027C3.5816 0.000800027 1.32459e-06 3.58235 1.32459e-06 8.0007C-0.000676915 9.17938 0.259117 10.3437 0.760801 11.4103L0.0168013 15.0398C-0.00968752 15.1694 -0.003629 15.3035 0.0344345 15.4302C0.072498 15.5569 0.141379 15.6722 0.234911 15.7657C0.328443 15.8592 0.443707 15.9281 0.570386 15.9662C0.697066 16.0042 0.831206 16.0103 0.960801 15.9838L4.5904 15.2398C5.6256 15.7278 6.7824 15.9998 8 15.9998C12.4184 15.9998 16 12.419 16 7.9999C16 3.58235 12.4184 0 8 0"
            fill="#A7A7A7" />
        </svg>

        <span class="text-sm text-black font-timenew">{{ post.likes }}</span>
      </div>

      <!-- Like icon -->
      <div class="flex items-center gap-1">
        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M1.26967 1.47326C2.08154 0.529931 3.18253 0 4.33051 0C5.4785 0 6.57949 0.529931 7.39136 1.47326C7.5501 1.65709 7.75444 1.88587 8.00439 2.1596C8.25376 1.88587 8.45782 1.65709 8.61656 1.47326C9.42503 0.538009 10.5184 0.0113884 11.6591 0.0078378C12.7997 0.00428717 13.8955 0.524094 14.7083 1.4543C15.521 2.3845 15.9851 3.64992 15.9996 4.97558C16.0142 6.30123 15.578 7.57999 14.7859 8.53395L8.61569 15.7053C8.45332 15.894 8.23312 16 8.00353 16C7.77393 16 7.55373 15.894 7.39136 15.7053L1.22118 8.53496C0.429811 7.58636 -0.0087772 6.31403 0.000133157 4.99277C0.00904351 3.6715 0.465603 2.40733 1.26967 1.47326Z"
            fill="#A7A7A7" />
        </svg>

        <span class="text-sm text-black">{{ post.comments?.length || 0 }}</span>
      </div>


      <!-- See more button -->

      <div v-if="!isDashboard" class="flex">
        <button class="px-2 py-1 rounded-full border border-[#00E0E9] text-xs text-[#00E0E9] font-semibold">
          See more
        </button>
      </div>

      <div v-else class="flex gap-2">
        <button @click.stop="deletePost(post.id)"
          class="flex items-center transition gap-2 px-2 py-1 rounded-full group cursor-pointer hover:bg-[#F3462B] border border-[#F3462B] text-xs text-[#F3462B]">
          <span class="text-[#F3462B] group-hover:text-white text-xs">Delete</span>
          <svg class="fill-[#F3462B] opacity-60 group-hover:fill-white group-hover:opacity-100" width="12" height="12"
            viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M12 0.666667H9L8.14286 0H3.85714L3 0.666667H0V2H12M0.857143 10.6667C0.857143 11.0203 1.03775 11.3594 1.35925 11.6095C1.68074 11.8595 2.11677 12 2.57143 12H9.42857C9.88323 12 10.3193 11.8595 10.6408 11.6095C10.9622 11.3594 11.1429 11.0203 11.1429 10.6667V2.66667H0.857143V10.6667Z" />
          </svg>
        </button>
        <button @click.stop="goTo('adminEditNews')"
          class="flex items-center group cursor-pointer hover:bg-black/80 transition gap-2 px-2 py-1 rounded-full border border-black/70 text-xs">
          <span class="text-black/70 group-hover:text-white text-xs">Edit</span>
          <svg class="opacity-60 fill-black group-hover:fill-white group-hover:opacity-100" width="16" height="16"
            viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M11.1319 14.6632H3.39861C3.12554 14.6643 2.85501 14.6106 2.60307 14.5053C2.35114 14.3999 2.12292 14.2451 1.93194 14.0499C1.73956 13.8561 1.58749 13.6261 1.4845 13.3732C1.38152 13.1204 1.32967 12.8496 1.33194 12.5765V4.84987C1.32854 4.57806 1.38058 4.30841 1.48489 4.05738C1.58919 3.80635 1.74358 3.57923 1.93861 3.38987C2.12837 3.19747 2.35516 3.04553 2.60528 2.9432C2.85866 2.83724 3.13063 2.78285 3.40528 2.7832H6.36528C6.49789 2.7832 6.62506 2.83588 6.71883 2.92965C6.8126 3.02342 6.86528 3.1506 6.86528 3.2832C6.86528 3.41581 6.8126 3.54299 6.71883 3.63676C6.62506 3.73053 6.49789 3.7832 6.36528 3.7832H3.40528C3.26189 3.78711 3.12006 3.81412 2.98528 3.8632C2.78884 3.94612 2.62134 4.08533 2.50389 4.26329C2.38644 4.44124 2.32429 4.64999 2.32528 4.8632V12.5899C2.32361 12.7331 2.35045 12.8753 2.40424 13.008C2.45804 13.1408 2.53771 13.2615 2.63861 13.3632C2.7395 13.4633 2.85915 13.5425 2.99071 13.5963C3.12228 13.6501 3.26316 13.6773 3.40528 13.6765H11.1386C11.2806 13.6765 11.4206 13.6499 11.5519 13.5965C11.6826 13.544 11.8008 13.4645 11.8986 13.3632C11.9999 13.2654 12.0794 13.1472 12.1319 13.0165C12.1909 12.8845 12.2204 12.7412 12.2186 12.5965V9.63654C12.2186 9.50393 12.2713 9.37675 12.3651 9.28298C12.4588 9.18922 12.586 9.13654 12.7186 9.13654C12.8512 9.13654 12.9784 9.18922 13.0722 9.28298C13.1659 9.37675 13.2186 9.50393 13.2186 9.63654V12.6165C13.2197 12.8896 13.166 13.1601 13.0607 13.4121C12.9553 13.664 12.8005 13.8922 12.6053 14.0832C12.4139 14.2753 12.1876 14.4292 11.9386 14.5365C11.6806 14.6299 11.4066 14.6732 11.1319 14.6632Z" />
            <path
              d="M14.5386 3.63717C14.4707 3.46552 14.366 3.3108 14.232 3.18384L12.7986 1.75051C12.6717 1.61647 12.517 1.5118 12.3453 1.44384C12.0874 1.33515 11.8028 1.30628 11.5283 1.36094C11.2537 1.41561 11.0019 1.5513 10.8053 1.75051L9.6653 2.89051V2.92384L4.5053 8.07717C4.24479 8.33947 4.0986 8.69416 4.09863 9.06384V10.5105C4.10039 10.883 4.24915 11.2398 4.51257 11.5032C4.776 11.7667 5.13277 11.9154 5.5053 11.9172H6.95197C7.13566 11.9174 7.31755 11.881 7.48698 11.81C7.65641 11.739 7.80996 11.6349 7.93863 11.5038L13.0986 6.34384L14.2453 5.19717C14.38 5.07051 14.4853 4.91584 14.552 4.74384C14.6283 4.57286 14.6677 4.38773 14.6677 4.20051C14.6677 4.01328 14.6283 3.82815 14.552 3.65717L14.5386 3.63717ZM13.6186 4.33717C13.597 4.38754 13.5652 4.43293 13.5253 4.47051L12.712 5.28384L10.712 3.28384L11.532 2.46384C11.6107 2.38766 11.7157 2.34469 11.8253 2.34384C11.8781 2.34472 11.9302 2.35605 11.9786 2.37717C12.0302 2.39895 12.0746 2.43006 12.112 2.47051L13.552 3.90384C13.5883 3.943 13.6176 3.9881 13.6386 4.03717C13.6485 4.08781 13.6485 4.13987 13.6386 4.19051C13.6411 4.24021 13.6344 4.28995 13.6186 4.33717Z" />
          </svg>
        </button>
      </div>
    </div>
  </div>
</template>

<script setup>
import { defineProps } from 'vue'
import { useRoute, useRouter } from 'vue-router'
import { computed } from 'vue'
const route = useRoute()
const props = defineProps({
  post: Object,
  index: Number,
})

const isDashboard = computed(() => {
  return route.name === 'adminNews'
})

const router = useRouter()
const emit = defineEmits(['deletePost']);

function deletePost(id) {
  emit('deletePost', id);
}

function goTo(name) {
  router.push({ name: name, params: { id: props.post.id } })
}
</script>
