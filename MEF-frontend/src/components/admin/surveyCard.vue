<template>
  <div class="p-4 bg-white shadow-lg rounded-lg border border-black/20">
    <h1 class="text-sm font-semibold line-clamp-1 flex justify-between items-center">
      <span>{{ props.survey.title }}</span>

      <div>
        <svg width="24" height="24" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M10.4 16.0008C10.6122 16.0008 10.8157 15.9165 10.9657 15.7665C11.1158 15.6164 11.2 15.413 11.2 15.2008C11.2 14.9886 11.1158 14.7851 10.9657 14.6351C10.8157 14.4851 10.6122 14.4008 10.4 14.4008C10.1879 14.4008 9.98439 14.4851 9.83436 14.6351C9.68433 14.7851 9.60005 14.9886 9.60005 15.2008C9.60005 15.413 9.68433 15.6164 9.83436 15.7665C9.98439 15.9165 10.1879 16.0008 10.4 16.0008ZM11.2 21.6008C11.2 21.813 11.1158 22.0164 10.9657 22.1665C10.8157 22.3165 10.6122 22.4008 10.4 22.4008C10.1879 22.4008 9.98439 22.3165 9.83436 22.1665C9.68433 22.0164 9.60005 21.813 9.60005 21.6008C9.60005 21.3886 9.68433 21.1851 9.83436 21.0351C9.98439 20.8851 10.1879 20.8008 10.4 20.8008C10.6122 20.8008 10.8157 20.8851 10.9657 21.0351C11.1158 21.1851 11.2 21.3886 11.2 21.6008ZM4.80005 9.60078C4.80005 8.32774 5.30576 7.10684 6.20594 6.20667C7.10611 5.30649 8.32701 4.80078 9.60005 4.80078H22.4C23.6731 4.80078 24.894 5.30649 25.7942 6.20667C26.6943 7.10684 27.2 8.32774 27.2 9.60078V22.4008C27.2 23.6738 26.6943 24.8947 25.7942 25.7949C24.894 26.6951 23.6731 27.2008 22.4 27.2008H9.60005C8.32701 27.2008 7.10611 26.6951 6.20594 25.7949C5.30576 24.8947 4.80005 23.6738 4.80005 22.4008V9.60078ZM8.80005 8.00078C8.58788 8.00078 8.38439 8.08507 8.23436 8.2351C8.08433 8.38513 8.00005 8.58861 8.00005 8.80078C8.00005 9.01295 8.08433 9.21644 8.23436 9.36647C8.38439 9.5165 8.58788 9.60078 8.80005 9.60078H23.2C23.4122 9.60078 23.6157 9.5165 23.7657 9.36647C23.9158 9.21644 24 9.01295 24 8.80078C24 8.58861 23.9158 8.38513 23.7657 8.2351C23.6157 8.08507 23.4122 8.00078 23.2 8.00078H8.80005ZM10.4 17.6008C11.0366 17.6008 11.647 17.3479 12.0971 16.8978C12.5472 16.4478 12.8 15.8373 12.8 15.2008C12.8 14.5643 12.5472 13.9538 12.0971 13.5037C11.647 13.0536 11.0366 12.8008 10.4 12.8008C9.76353 12.8008 9.15308 13.0536 8.70299 13.5037C8.2529 13.9538 8.00005 14.5643 8.00005 15.2008C8.00005 15.8373 8.2529 16.4478 8.70299 16.8978C9.15308 17.3479 9.76353 17.6008 10.4 17.6008ZM12.8 21.6008C12.8 20.9643 12.5472 20.3538 12.0971 19.9037C11.647 19.4536 11.0366 19.2008 10.4 19.2008C9.76353 19.2008 9.15308 19.4536 8.70299 19.9037C8.2529 20.3538 8.00005 20.9643 8.00005 21.6008C8.00005 22.2373 8.2529 22.8478 8.70299 23.2978C9.15308 23.7479 9.76353 24.0008 10.4 24.0008C11.0366 24.0008 11.647 23.7479 12.0971 23.2978C12.5472 22.8478 12.8 22.2373 12.8 21.6008ZM14.4 15.2008C14.4 15.413 14.4843 15.6164 14.6344 15.7665C14.7844 15.9165 14.9879 16.0008 15.2 16.0008H23.2C23.4122 16.0008 23.6157 15.9165 23.7657 15.7665C23.9158 15.6164 24 15.413 24 15.2008C24 14.9886 23.9158 14.7851 23.7657 14.6351C23.6157 14.4851 23.4122 14.4008 23.2 14.4008H15.2C14.9879 14.4008 14.7844 14.4851 14.6344 14.6351C14.4843 14.7851 14.4 14.9886 14.4 15.2008ZM15.2 20.8008C14.9879 20.8008 14.7844 20.8851 14.6344 21.0351C14.4843 21.1851 14.4 21.3886 14.4 21.6008C14.4 21.813 14.4843 22.0164 14.6344 22.1665C14.7844 22.3165 14.9879 22.4008 15.2 22.4008H23.2C23.4122 22.4008 23.6157 22.3165 23.7657 22.1665C23.9158 22.0164 24 21.813 24 21.6008C24 21.3886 23.9158 21.1851 23.7657 21.0351C23.6157 20.8851 23.4122 20.8008 23.2 20.8008H15.2Z"
            fill="black" fill-opacity="0.7" />
        </svg>
      </div>
    </h1>

    <p class="text-xs line-clamp-3 text-black/70 mt-2">
      {{ props.survey.description }}
    </p>

    <div class="grid grid-cols-2 gap-1 mt-4">
      <div class="col-span-1 space-y-2">
        <!-- Question No.-->
        <div class="flex gap-2 items-center">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"
            class="fill-black/70">
            <path
              d="M5 2C4.46957 2 3.96086 2.21071 3.58579 2.58579C3.21071 2.96086 3 3.46957 3 4V9.6C4.12662 9.02447 5.41722 8.85493 6.65426 9.11996C7.8913 9.38498 8.99916 10.0684 9.79112 11.0549C10.5831 12.0415 11.0107 13.2709 11.0019 14.536C10.9932 15.8011 10.5486 17.0245 9.743 18H13C13.5304 18 14.0391 17.7893 14.4142 17.4142C14.7893 17.0391 15 16.5304 15 16V4C15 3.46957 14.7893 2.96086 14.4142 2.58579C14.0391 2.21071 13.5304 2 13 2H5ZM5 5.5C5 5.36739 5.05268 5.24021 5.14645 5.14645C5.24021 5.05268 5.36739 5 5.5 5H12.5C12.6326 5 12.7598 5.05268 12.8536 5.14645C12.9473 5.24021 13 5.36739 13 5.5V6.5C13 6.63261 12.9473 6.75979 12.8536 6.85355C12.7598 6.94732 12.6326 7 12.5 7H5.5C5.36739 7 5.24021 6.94732 5.14645 6.85355C5.05268 6.75979 5 6.63261 5 6.5V5.5ZM16 6H16.5C16.6326 6 16.7598 6.05268 16.8536 6.14645C16.9473 6.24021 17 6.36739 17 6.5V8C17 8.13261 16.9473 8.25979 16.8536 8.35355C16.7598 8.44732 16.6326 8.5 16.5 8.5H16V6ZM16.5 9.5H16V12H16.5C16.6326 12 16.7598 11.9473 16.8536 11.8536C16.9473 11.7598 17 11.6326 17 11.5V10C17 9.86739 16.9473 9.74021 16.8536 9.64645C16.7598 9.55268 16.6326 9.5 16.5 9.5ZM16 13H16.5C16.6326 13 16.7598 13.0527 16.8536 13.1464C16.9473 13.2402 17 13.3674 17 13.5V15C17 15.1326 16.9473 15.2598 16.8536 15.3536C16.7598 15.4473 16.6326 15.5 16.5 15.5H16V13ZM10 14.5C10 15.6935 9.52589 16.8381 8.68198 17.682C7.83807 18.5259 6.69347 19 5.5 19C4.30653 19 3.16193 18.5259 2.31802 17.682C1.47411 16.8381 1 15.6935 1 14.5C1 13.3065 1.47411 12.1619 2.31802 11.318C3.16193 10.4741 4.30653 10 5.5 10C6.69347 10 7.83807 10.4741 8.68198 11.318C9.52589 12.1619 10 13.3065 10 14.5ZM5.5 16.38C5.33424 16.38 5.17527 16.4458 5.05806 16.5631C4.94085 16.6803 4.875 16.8392 4.875 17.005C4.875 17.1708 4.94085 17.3297 5.05806 17.4469C5.17527 17.5642 5.33424 17.63 5.5 17.63C5.66576 17.63 5.82473 17.5642 5.94194 17.4469C6.05915 17.3297 6.125 17.1708 6.125 17.005C6.125 16.8392 6.05915 16.6803 5.94194 16.5631C5.82473 16.4458 5.66576 16.38 5.5 16.38ZM5.5 11.503C4.452 11.503 3.636 12.321 3.647 13.458C3.64766 13.5237 3.66124 13.5885 3.68697 13.649C3.71271 13.7094 3.75009 13.7641 3.79698 13.8101C3.84388 13.8561 3.89936 13.8923 3.96028 13.9169C4.02119 13.9414 4.08634 13.9537 4.152 13.953C4.21766 13.9523 4.28255 13.9388 4.34296 13.913C4.40337 13.8873 4.45812 13.8499 4.50409 13.803C4.55005 13.7561 4.58633 13.7006 4.61085 13.6397C4.63537 13.5788 4.64766 13.5137 4.647 13.448C4.641 12.869 5.007 12.503 5.5 12.503C5.972 12.503 6.353 12.895 6.353 13.453C6.353 13.655 6.283 13.768 5.993 13.997L5.716 14.212C5.21 14.616 5 14.929 5 15.5C4.99977 15.6249 5.04633 15.7454 5.13051 15.8378C5.21469 15.9301 5.33039 15.9876 5.45482 15.9989C5.57926 16.0102 5.70341 15.9745 5.80283 15.8988C5.90225 15.8231 5.96974 15.7129 5.992 15.59L6.003 15.434C6.02 15.286 6.103 15.18 6.349 14.986L6.626 14.771C7.139 14.361 7.353 14.039 7.353 13.453C7.353 12.349 6.531 11.503 5.5 11.503Z" />
          </svg>
          <span class="text-sm">Questions:</span>
          <span class="text-sm">{{ props.survey.questions.length }}</span>
        </div>
        <!-- Repsonses No. -->
        <div class="flex gap-2 items-center">
          <div>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M18.357 1.61395C18.4594 1.44343 18.6253 1.32055 18.8183 1.27235C19.0112 1.22416 19.2155 1.25459 19.386 1.35695L19.389 1.35895L19.392 1.36095L19.402 1.36695C19.4409 1.39098 19.4789 1.41632 19.516 1.44295C19.5873 1.49229 19.6797 1.56295 19.793 1.65495C20.015 1.83995 20.305 2.11695 20.595 2.49295C21.177 3.24995 21.75 4.40695 21.75 5.99995C21.75 7.59295 21.177 8.74995 20.595 9.50695C20.305 9.88295 20.015 10.16 19.793 10.345C19.6726 10.4456 19.5464 10.5391 19.415 10.625L19.402 10.633L19.392 10.639L19.389 10.641L19.387 10.642C19.387 10.642 19.386 10.643 19 9.99995L19.386 10.643C19.2161 10.7393 19.0154 10.7657 18.8264 10.7164C18.6374 10.667 18.4752 10.5459 18.3741 10.3788C18.273 10.2117 18.2411 10.0118 18.2852 9.82148C18.3292 9.63121 18.4458 9.46563 18.61 9.35995L18.615 9.35595L18.655 9.32895C18.6957 9.30095 18.7547 9.25562 18.832 9.19295C18.985 9.06495 19.195 8.86695 19.405 8.59295C19.823 8.04995 20.25 7.20695 20.25 5.99995C20.25 4.79295 19.823 3.94995 19.406 3.40695C19.2372 3.18659 19.0447 2.98538 18.832 2.80695C18.7622 2.74937 18.6898 2.69498 18.615 2.64395L18.61 2.63995C18.441 2.53694 18.3195 2.37127 18.2721 2.17908C18.2247 1.98688 18.2552 1.78374 18.357 1.61395ZM10 9.99995C11.0609 9.99995 12.0783 9.57852 12.8284 8.82838C13.5786 8.07823 14 7.06082 14 5.99995C14 4.93909 13.5786 3.92167 12.8284 3.17152C12.0783 2.42138 11.0609 1.99995 10 1.99995C8.93913 1.99995 7.92172 2.42138 7.17157 3.17152C6.42143 3.92167 6 4.93909 6 5.99995C6 7.06082 6.42143 8.07823 7.17157 8.82838C7.92172 9.57852 8.93913 9.99995 10 9.99995ZM2 17.5C2 19.985 2 22 10 22C18 22 18 19.985 18 17.5C18 15.015 14.418 13 10 13C5.582 13 2 15.015 2 17.5Z"
                fill="black" fill-opacity="0.7" />
              <path
                d="M17.3859 3.35739C17.3015 3.30655 17.2078 3.27287 17.1103 3.25827C17.0128 3.24367 16.9133 3.24844 16.8177 3.27231C16.722 3.29618 16.632 3.33868 16.5527 3.39738C16.4735 3.45608 16.4066 3.52982 16.3559 3.61439L16.6059 4.63839L16.6129 4.64339L16.6759 4.69239C16.7359 4.74239 16.8199 4.82139 16.9059 4.93239C17.1382 5.2392 17.2595 5.61572 17.2499 6.00039C17.2595 6.38506 17.1382 6.76158 16.9059 7.06839C16.8221 7.17808 16.7235 7.27567 16.6129 7.35839L16.6049 7.36239C16.4387 7.46752 16.3204 7.63377 16.2755 7.82531C16.2306 8.01685 16.2628 8.21835 16.3651 8.38637C16.4675 8.5544 16.6317 8.6755 16.8225 8.72358C17.0132 8.77165 17.2152 8.74286 17.3849 8.64339H17.3869L17.3889 8.64139L17.3919 8.64039L17.3989 8.63539L17.4189 8.62339C17.4949 8.57436 17.5674 8.52023 17.6359 8.46139C17.7649 8.35439 17.9299 8.19639 18.0949 7.98239C18.5287 7.41351 18.7593 6.7157 18.7499 6.00039C18.7593 5.28508 18.5287 4.58727 18.0949 4.01839C17.918 3.788 17.7084 3.58454 17.4729 3.41439L17.4189 3.37739L17.3989 3.36539L17.3919 3.36039L17.3889 3.35939L17.3869 3.35839C17.3869 3.35839 17.3859 3.35739 16.9999 4.00039L17.3859 3.35739Z"
                fill="black" fill-opacity="0.6" />
            </svg>
          </div>

          <span class="text-sm">Response:</span>
          <!-- <div class="bg-light-blue w-2 h-2 rounded-full"></div> -->
          <span class="text-sm">{{ props.survey.responses ? props.survey.responses : 0 }}</span>
        </div>
      </div>

      <div class="flex flex-col justify-between">
        <!-- Created at -->
        <div class="flex gap-2 items-start">
          <span class="text-sm text-black/70">Created:</span>
          <span class="text-sm font-medium">{{ props.survey.created_at }}</span>
        </div>
        <!-- Version -->
        <div class="flex gap-2 items-center">
          <span class="text-sm text-black/70">Version:</span>
          <span class="text-sm font-medium">{{ props.survey.version }}</span>
        </div>
      </div>
    </div>

    <div class="flex justify-end gap-4 mt-4">
      <button @click.stop="deleteSurvey(props.survey.id)"
        class="flex items-center transition gap-2 px-2 py-1 rounded-full group cursor-pointer hover:bg-[#F3462B] border border-[#F3462B] text-xs text-[#F3462B]">
        <span class="text-[#F3462B] group-hover:text-white text-xs">Delete</span>
        <svg class="fill-[#F3462B] opacity-60 group-hover:fill-white group-hover:opacity-100" width="12" height="12"
          viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M12 0.666667H9L8.14286 0H3.85714L3 0.666667H0V2H12M0.857143 10.6667C0.857143 11.0203 1.03775 11.3594 1.35925 11.6095C1.68074 11.8595 2.11677 12 2.57143 12H9.42857C9.88323 12 10.3193 11.8595 10.6408 11.6095C10.9622 11.3594 11.1429 11.0203 11.1429 10.6667V2.66667H0.857143V10.6667Z" />
        </svg>
      </button>

      <button @click.stop="goTo('adminEditForms')"
        class="flex items-center group cursor-pointer hover:bg-black/80 transition gap-2 px-2 py-1 rounded-full border border-black/70 text-xs">
        <span class="text-black/70 group-hover:text-white text-xs">Edit</span>
        <svg class="opacity-60 fill-black group-hover:fill-white group-hover:opacity-100" width="16" height="16"
          viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M11.1319 14.6632H3.39861C3.12554 14.6643 2.85501 14.6106 2.60307 14.5053C2.35114 14.3999 2.12292 14.2451 1.93194 14.0499C1.73956 13.8561 1.58749 13.6261 1.4845 13.3732C1.38152 13.1204 1.32967 12.8496 1.33194 12.5765V4.84987C1.32854 4.57806 1.38058 4.30841 1.48489 4.05738C1.58919 3.80635 1.74358 3.57923 1.93861 3.38987C2.12837 3.19747 2.35516 3.04553 2.60528 2.9432C2.85866 2.83724 3.13063 2.78285 3.40528 2.7832H6.36528C6.49789 2.7832 6.62506 2.83588 6.71883 2.92965C6.8126 3.02342 6.86528 3.1506 6.86528 3.2832C6.86528 3.41581 6.8126 3.54299 6.71883 3.63676C6.62506 3.73053 6.49789 3.7832 6.36528 3.7832H3.40528C3.26189 3.78711 3.12006 3.81412 2.98528 3.8632C2.78884 3.94612 2.62134 4.08533 2.50389 4.26329C2.38644 4.44124 2.32429 4.64999 2.32528 4.8632V12.5899C2.32361 12.7331 2.35045 12.8753 2.40424 13.008C2.45804 13.1408 2.53771 13.2615 2.63861 13.3632C2.7395 13.4633 2.85915 13.5425 2.99071 13.5963C3.12228 13.6501 3.26316 13.6773 3.40528 13.6765H11.1386C11.2806 13.6765 11.4206 13.6499 11.5519 13.5965C11.6826 13.544 11.8008 13.4645 11.8986 13.3632C11.9999 13.2654 12.0794 13.1472 12.1319 13.0165C12.1909 12.8845 12.2204 12.7412 12.2186 12.5965V9.63654C12.2186 9.50393 12.2713 9.37675 12.3651 9.28298C12.4588 9.18922 12.586 9.13654 12.7186 9.13654C12.8512 9.13654 12.9784 9.18922 13.0722 9.28298C13.1659 9.37675 13.2186 9.50393 13.2186 9.63654V12.6165C13.2197 12.8896 13.166 13.1601 13.0607 13.4121C12.9553 13.664 12.8005 13.8922 12.6053 14.0832C12.4139 14.2753 12.1876 14.4292 11.9386 14.5365C11.6806 14.6299 11.4066 14.6732 11.1319 14.6632Z" />
          <path
            d="M14.5386 3.63717C14.4707 3.46552 14.366 3.3108 14.232 3.18384L12.7986 1.75051C12.6717 1.61647 12.517 1.5118 12.3453 1.44384C12.0874 1.33515 11.8028 1.30628 11.5283 1.36094C11.2537 1.41561 11.0019 1.5513 10.8053 1.75051L9.6653 2.89051V2.92384L4.5053 8.07717C4.24479 8.33947 4.0986 8.69416 4.09863 9.06384V10.5105C4.10039 10.883 4.24915 11.2398 4.51257 11.5032C4.776 11.7667 5.13277 11.9154 5.5053 11.9172H6.95197C7.13566 11.9174 7.31755 11.881 7.48698 11.81C7.65641 11.739 7.80996 11.6349 7.93863 11.5038L13.0986 6.34384L14.2453 5.19717C14.38 5.07051 14.4853 4.91584 14.552 4.74384C14.6283 4.57286 14.6677 4.38773 14.6677 4.20051C14.6677 4.01328 14.6283 3.82815 14.552 3.65717L14.5386 3.63717ZM13.6186 4.33717C13.597 4.38754 13.5652 4.43293 13.5253 4.47051L12.712 5.28384L10.712 3.28384L11.532 2.46384C11.6107 2.38766 11.7157 2.34469 11.8253 2.34384C11.8781 2.34472 11.9302 2.35605 11.9786 2.37717C12.0302 2.39895 12.0746 2.43006 12.112 2.47051L13.552 3.90384C13.5883 3.943 13.6176 3.9881 13.6386 4.03717C13.6485 4.08781 13.6485 4.13987 13.6386 4.19051C13.6411 4.24021 13.6344 4.28995 13.6186 4.33717Z" />
        </svg>
      </button>
    </div>
  </div>
</template>

<script setup>
import { useRouter } from 'vue-router'

const props = defineProps({
  survey: {
    type: Object,
    required: true,
  },
})
const emit = defineEmits(['deleteSurvey'])
const router = useRouter()

function deleteSurvey() {
  emit('deleteSurvey', props.survey.id)

}

function goTo(name) {

  router.push({
    name: name,
    params: {
      id: props.survey.id,
    },
  })
}
</script>
