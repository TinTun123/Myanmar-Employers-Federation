<template>

    <div class="flex flex-col gap-4 bg-white shadow-lg rounded-lg p-2 border border-black/20">
        <div class="flex justify-between  items-center">
            <span class="text-sm">Statement - {{ statement.statement_no }}</span>
            <svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M17.525 4.46606C17.4736 4.65834 17.5006 4.86319 17.6002 5.03554C17.6998 5.20788 17.8637 5.33361 18.056 5.38506C18.1512 5.41054 18.2505 5.41701 18.3482 5.40412C18.4459 5.39122 18.5401 5.3592 18.6255 5.30989C18.7978 5.21031 18.9236 5.04634 18.975 4.85406L19.621 2.43906C19.6505 2.34277 19.6602 2.24152 19.6497 2.14138C19.6392 2.04123 19.6086 1.94422 19.5598 1.85615C19.511 1.76807 19.4449 1.69073 19.3656 1.62873C19.2862 1.56673 19.1952 1.52135 19.0979 1.49528C19.0006 1.46922 18.8991 1.46301 18.7994 1.47703C18.6997 1.49104 18.6038 1.525 18.5175 1.57686C18.4312 1.62873 18.3562 1.69745 18.297 1.77892C18.2378 1.86039 18.1957 1.95294 18.173 2.05106L17.525 4.46606ZM24.78 3.22006C24.9205 3.36069 24.9993 3.55131 24.9993 3.75006C24.9993 3.94881 24.9205 4.13944 24.78 4.28006L22.28 6.78006C22.1378 6.91254 21.9498 6.98467 21.7555 6.98124C21.5612 6.97781 21.3758 6.8991 21.2384 6.76168C21.101 6.62427 21.0223 6.43889 21.0188 6.24459C21.0154 6.05028 21.0875 5.86224 21.22 5.72006L23.72 3.22006C23.8606 3.07961 24.0513 3.00072 24.25 3.00072C24.4488 3.00072 24.6394 3.07961 24.78 3.22006ZM22.5 9.75206C22.5 9.55315 22.579 9.36238 22.7197 9.22173C22.8603 9.08108 23.0511 9.00206 23.25 9.00206H25.75C25.9489 9.00206 26.1397 9.08108 26.2803 9.22173C26.421 9.36238 26.5 9.55315 26.5 9.75206C26.5 9.95098 26.421 10.1417 26.2803 10.2824C26.1397 10.423 25.9489 10.5021 25.75 10.5021H23.25C23.0511 10.5021 22.8603 10.423 22.7197 10.2824C22.579 10.1417 22.5 9.95098 22.5 9.75206ZM14.249 26.0001C13.4306 26.0002 12.626 25.7889 11.9133 25.3867C11.2005 24.9844 10.6038 24.4048 10.181 23.7041L8.17101 24.7101C7.65472 24.968 7.07038 25.0569 6.50073 24.9643C5.93108 24.8717 5.40501 24.6022 4.99701 24.1941L3.80701 23.0041C3.39882 22.5961 3.12935 22.07 3.03674 21.5003C2.94413 20.9307 3.03309 20.3463 3.29101 19.8301L10.446 5.52006C10.641 5.13041 10.9257 4.79266 11.2768 4.53463C11.6278 4.27661 12.0352 4.10569 12.4653 4.03596C12.8954 3.96623 13.3359 3.99969 13.7505 4.13358C14.1651 4.26748 14.5419 4.49797 14.85 4.80606L23.195 13.1511C23.5031 13.4592 23.7335 13.8361 23.8673 14.2508C24.0011 14.6655 24.0345 15.106 23.9647 15.5361C23.8949 15.9661 23.7238 16.3735 23.4657 16.7245C23.2076 17.0755 22.8697 17.3602 22.48 17.5551L18.653 19.4681C18.9448 20.1891 19.0551 20.9708 18.9741 21.7444C18.8932 22.5181 18.6235 23.26 18.1887 23.905C17.7539 24.55 17.1674 25.0784 16.4806 25.4437C15.7938 25.809 15.0279 26.0001 14.25 26.0001M17.306 20.1431L11.53 23.0301C11.9657 23.6985 12.6322 24.1832 13.4023 24.392C14.1724 24.6008 14.9924 24.5189 15.706 24.1621C16.4197 23.8053 16.9772 23.1984 17.2722 22.457C17.5673 21.7157 17.5793 20.8927 17.306 20.1431Z"
                    fill="#694C55" />
            </svg>
        </div>

        <div>
            <span class="text-sm">Myanmar Employers Federation</span>
        </div>

        <div class="flex justify-between items-center">
            <span class="text-xs font-semibold">{{ statement.date }}</span>

            <div v-if="!isDashboard" class="flex ">
                <button class="px-2 py-1 rounded-full border border-[#00E0E9] text-xs text-[#00E0E9] font-semibold">
                    See more
                </button>
            </div>

            <div v-else class="flex gap-2">
                <button @click.stop="deletePost(statement.id)"
                    class="flex items-center transition gap-2 px-2 py-1 rounded-full group cursor-pointer hover:bg-[#F3462B] border border-[#F3462B] text-xs text-[#F3462B]">
                    <span class="text-[#F3462B] group-hover:text-white text-xs">Delete</span>
                    <svg class="fill-[#F3462B] opacity-60 group-hover:fill-white group-hover:opacity-100" width="12"
                        height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M12 0.666667H9L8.14286 0H3.85714L3 0.666667H0V2H12M0.857143 10.6667C0.857143 11.0203 1.03775 11.3594 1.35925 11.6095C1.68074 11.8595 2.11677 12 2.57143 12H9.42857C9.88323 12 10.3193 11.8595 10.6408 11.6095C10.9622 11.3594 11.1429 11.0203 11.1429 10.6667V2.66667H0.857143V10.6667Z" />
                    </svg>
                </button>

                <button @click.stop="goTo('adminEditStatements')"
                    class="flex items-center group cursor-pointer hover:bg-black/80 transition gap-2 px-2 py-1 rounded-full border border-black/70 text-xs">
                    <span class="text-black/70 group-hover:text-white text-xs">Edit</span>
                    <svg class="opacity-60 fill-black group-hover:fill-white group-hover:opacity-100" width="16"
                        height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M11.1319 14.6632H3.39861C3.12554 14.6643 2.85501 14.6106 2.60307 14.5053C2.35114 14.3999 2.12292 14.2451 1.93194 14.0499C1.73956 13.8561 1.58749 13.6261 1.4845 13.3732C1.38152 13.1204 1.32967 12.8496 1.33194 12.5765V4.84987C1.32854 4.57806 1.38058 4.30841 1.48489 4.05738C1.58919 3.80635 1.74358 3.57923 1.93861 3.38987C2.12837 3.19747 2.35516 3.04553 2.60528 2.9432C2.85866 2.83724 3.13063 2.78285 3.40528 2.7832H6.36528C6.49789 2.7832 6.62506 2.83588 6.71883 2.92965C6.8126 3.02342 6.86528 3.1506 6.86528 3.2832C6.86528 3.41581 6.8126 3.54299 6.71883 3.63676C6.62506 3.73053 6.49789 3.7832 6.36528 3.7832H3.40528C3.26189 3.78711 3.12006 3.81412 2.98528 3.8632C2.78884 3.94612 2.62134 4.08533 2.50389 4.26329C2.38644 4.44124 2.32429 4.64999 2.32528 4.8632V12.5899C2.32361 12.7331 2.35045 12.8753 2.40424 13.008C2.45804 13.1408 2.53771 13.2615 2.63861 13.3632C2.7395 13.4633 2.85915 13.5425 2.99071 13.5963C3.12228 13.6501 3.26316 13.6773 3.40528 13.6765H11.1386C11.2806 13.6765 11.4206 13.6499 11.5519 13.5965C11.6826 13.544 11.8008 13.4645 11.8986 13.3632C11.9999 13.2654 12.0794 13.1472 12.1319 13.0165C12.1909 12.8845 12.2204 12.7412 12.2186 12.5965V9.63654C12.2186 9.50393 12.2713 9.37675 12.3651 9.28298C12.4588 9.18922 12.586 9.13654 12.7186 9.13654C12.8512 9.13654 12.9784 9.18922 13.0722 9.28298C13.1659 9.37675 13.2186 9.50393 13.2186 9.63654V12.6165C13.2197 12.8896 13.166 13.1601 13.0607 13.4121C12.9553 13.664 12.8005 13.8922 12.6053 14.0832C12.4139 14.2753 12.1876 14.4292 11.9386 14.5365C11.6806 14.6299 11.4066 14.6732 11.1319 14.6632Z" />
                        <path
                            d="M14.5386 3.63717C14.4707 3.46552 14.366 3.3108 14.232 3.18384L12.7986 1.75051C12.6717 1.61647 12.517 1.5118 12.3453 1.44384C12.0874 1.33515 11.8028 1.30628 11.5283 1.36094C11.2537 1.41561 11.0019 1.5513 10.8053 1.75051L9.6653 2.89051V2.92384L4.5053 8.07717C4.24479 8.33947 4.0986 8.69416 4.09863 9.06384V10.5105C4.10039 10.883 4.24915 11.2398 4.51257 11.5032C4.776 11.7667 5.13277 11.9154 5.5053 11.9172H6.95197C7.13566 11.9174 7.31755 11.881 7.48698 11.81C7.65641 11.739 7.80996 11.6349 7.93863 11.5038L13.0986 6.34384L14.2453 5.19717C14.38 5.07051 14.4853 4.91584 14.552 4.74384C14.6283 4.57286 14.6677 4.38773 14.6677 4.20051C14.6677 4.01328 14.6283 3.82815 14.552 3.65717L14.5386 3.63717ZM13.6186 4.33717C13.597 4.38754 13.5652 4.43293 13.5253 4.47051L12.712 5.28384L10.712 3.28384L11.532 2.46384C11.6107 2.38766 11.7157 2.34469 11.8253 2.34384C11.8781 2.34472 11.9302 2.35605 11.9786 2.37717C12.0302 2.39895 12.0746 2.43006 12.112 2.47051L13.552 3.90384C13.5883 3.943 13.6176 3.9881 13.6386 4.03717C13.6485 4.08781 13.6485 4.13987 13.6386 4.19051C13.6411 4.24021 13.6344 4.28995 13.6186 4.33717Z" />
                    </svg>
                </button>
            </div>
        </div>
    </div>

</template>

<script setup>
import { computed } from 'vue';
import { useRoute, useRouter } from 'vue-router';
import { useNewsStore } from '@/stores/newsStore';
import { useUserStore } from '@/stores/userStore';

const props = defineProps({
    statement: {
        type: Object,
        required: true
    }
});

const isDashboard = computed(() => {
    return route.name === 'adminStatements'
})

const newsStore = useNewsStore();
const userStore = useUserStore();
const router = useRouter();
const route = useRoute();
function goTo(name) {
    router.push({ name: name, params: { id: props.statement.id } })
}

function deletePost(id) {
    newsStore.deleteStatement(id).then((response) => {
        if (response.status === 200) {
            userStore.setNotification({
                type: 'success',
                message: 'Statement deleted successfully!'
            });
        }
    }).catch((error) => {
        console.error('Error deleting statement:', error);
    })
}
</script>